<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>C√†i ƒë·∫∑t ·∫£nh & m·∫≠t kh·∫©u</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0e14; --card:#121826; --muted:#8a93a6; --ink:#e6ebff; --accent:#6ee7ff;
      --box:#0f1422; --ok:#62f3a2; --warn:#ff7a7a; --border:#1e2637;
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; background:radial-gradient(1200px 700px at 80% 10%, #141d2f, #0b0e14 60%);
      color:var(--ink); font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }
    h1{ text-align:center; font-size:clamp(22px,3vw,28px); margin:16px 0 6px }
    p.sub{ text-align:center; color:var(--muted); margin:0 0 18px }
    .wrap{ width:min(980px, 94vw); margin:0 auto 40px; display:grid; gap:18px }
    .grid{ display:grid; grid-template-columns: repeat(3,1fr); gap:16px; }
    .card{
      background:var(--card); border:1px solid var(--border); border-radius:14px; padding:14px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .title{ font-weight:700; margin:0 0 10px; letter-spacing:.2px }
    .preview{
      width:100%; aspect-ratio:1/1; background:var(--box); border:1px dashed #2b3550;
      border-radius:12px; display:grid; place-items:center; overflow:hidden; margin-bottom:10px;
    }
    .preview img{ width:100%; height:100%; object-fit:cover }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
    .row input[type="file"]{ flex:1; color:var(--muted) }
    .row small{ color:var(--muted) }
    .pad{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:14px }
    label{ display:block; color:var(--muted); font-size:13px; margin:8px 0 6px }
    input[type="password"], input[type="text"]{
      width:100%; height:42px; background:var(--box); color:var(--ink); border:1px solid #2b3550;
      border-radius:10px; padding:0 12px; outline:none;
    }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px }
    button{
      height:40px; border-radius:10px; border:1px solid var(--border); background:#111829; color:#dfe6ff;
      padding:0 14px; cursor:pointer;
    }
    button.primary{ background:linear-gradient(0deg,#0ea5e9,#38bdf8); border:0; color:#00121a; font-weight:700 }
    button.green{ background:linear-gradient(0deg,#34d399,#6ee7b7); border:0; color:#022b1e; font-weight:700 }
    button.red{ background:linear-gradient(0deg,#fb7185,#fda4af); border:0; color:#33050e; font-weight:700 }
    .hint{ color:var(--muted); font-size:12px; margin-top:6px }
    .footer{ text-align:center; color:#8ea3c2; opacity:.85; margin-top:10px }
    .ok{ color:var(--ok) } .warn{ color:var(--warn) }
    @media (max-width:1100px){ .grid{ grid-template-columns:1fr 1fr } }
    @media (max-width:900px){ .grid{ grid-template-columns:1fr } }
  </style>
</head>
<body>
  <h1>‚öôÔ∏è C√†i ƒë·∫∑t ·∫£nh & m·∫≠t kh·∫©u</h1>
  <p class="sub">Ch·ªçn <b>3 ·∫£nh</b> (Index, Birthday-Top, Birthday-Card) + 1 ·∫£nh Galaxy v√† ƒë·∫∑t m·∫≠t kh·∫©u üíù</p>

  <section class="wrap">
    <div class="grid">
      <!-- INDEX -->
      <div class="card">
        <div class="title">·∫¢nh cho <u>Index</u> (m√†n h√¨nh nh·∫≠p pass)</div>
        <div class="preview" id="pv_index"><small>Ch∆∞a c√≥ ·∫£nh</small></div>
        <div class="row">
          <input type="file" id="f_index" accept="image/*">
        </div>
        <small class="hint">Hi·ªÉn th·ªã ·ªü b√™n tr√°i m√†n h√¨nh nh·∫≠p pass.</small>
      </div>

      <!-- BIRTHDAY - TOP -->
      <div class="card">
        <div class="title">·∫¢nh cho <u>Birthday ‚Äî Top</u> (·∫£nh b√°nh/intro)</div>
        <div class="preview" id="pv_birthday_top"><small>M·∫∑c ƒë·ªãnh: <code>assets/cute-cake.png</code></small></div>
        <div class="row">
          <input type="file" id="f_birthday_top" accept="image/*">
        </div>
        <small class="hint">N·∫øu kh√¥ng ch·ªçn, trang s·∫Ω d√πng <b>assets/cute-cake.PNG</b>.</small>
      </div>

      <!-- BIRTHDAY - CARD -->
      <div class="card">
        <div class="title">·∫¢nh cho <u>Birthday ‚Äî Card</u> (thi·ªáp b·∫•m ƒë·ªÉ m·ªü qu√†)</div>
        <div class="preview" id="pv_birthday_card"><small>M·∫∑c ƒë·ªãnh: <code>assets/card-cute.jpg</code></small></div>
        <div class="row">
          <input type="file" id="f_birthday_card" accept="image/*">
        </div>
        <small class="hint">N·∫øu kh√¥ng ch·ªçn, trang s·∫Ω d√πng <b>assets/card-cute.jpg</b>.</small>
      </div>

      <!-- GALAXY -->
      <div class="card">
        <div class="title">·∫¢nh cho <u>Galaxy</u> (th·∫ª ·∫£nh quay quanh)</div>
        <div class="preview" id="pv_galaxy"><small>Ch∆∞a c√≥ ·∫£nh</small></div>
        <div class="row">
          <input type="file" id="f_galaxy" accept="image/*">
        </div>
        <small class="hint">S·∫Ω ƒë∆∞·ª£c d√πng l√†m card ·∫£nh ·ªü <code>galaxy.html</code>.</small>
      </div>
    </div>

    <div class="pad">
      <label for="pw">M·∫≠t kh·∫©u m·ªü qu√†</label>
      <input type="password" id="pw" placeholder="Nh·∫≠p m·∫≠t kh·∫©u... (v√≠ d·ª•: 1234)">
      <label for="greeting">L·ªùi ch√∫c khi m·ªü qu√†</label>
     <input type="text" id="greeting" placeholder="V√≠ d·ª•: Ch√∫c b·∫°n tu·ªïi m·ªõi r·ª±c r·ª° & h·∫°nh ph√∫c! üíñ">
      <div class="actions">
        <button class="primary" id="btnSave">üíæ L∆∞u</button>
        <button class="red" id="btnClear">üóë X√≥a h·∫øt</button>
        <button id="btnExport">‚¨áÔ∏è Export</button>
        <label for="imp" class="btnlike">
          <button id="btnImport">‚¨ÜÔ∏è Import</button>
        </label>
        <input id="imp" type="file" accept="application/json" style="display:none">
        <span id="msg" style="margin-left:auto;"></span>
      </div>
      <div class="footer">
        N·∫øu ·∫£nh qu√° n·∫∑ng, h·ªá ƒëi·ªÅu h√†nh c√≥ th·ªÉ gi·ªõi h·∫°n dung l∆∞·ª£ng l∆∞u. Khuy·∫øn ngh·ªã &lt; 2MB m·ªói ·∫£nh.
      </div>
    </div>

    <div style="text-align:center;margin-top:8px">
      <a href="index.html" style="color:#a7f3d0;text-decoration:none">‚Üê Quay l·∫°i Index</a>
    </div>
  </section>

<script>
/* ====== Keys ====== */
const LS_PW             = 'userPassword';
const LS_IMG_INDEX      = 'img_index_dataurl';
const LS_IMG_BIRTH_TOP  = 'img_birthday_top_dataurl';   // NEW
const LS_IMG_BIRTH_CARD = 'img_birthday_card_dataurl';  // NEW
const LS_IMG_GALAXY     = 'img_galaxy_dataurl';
/* ====== Elements ====== */
const pvIndex = document.getElementById('pv_index');
const pvBirthTop = document.getElementById('pv_birthday_top');
const pvBirthCard = document.getElementById('pv_birthday_card');
const pvGala  = document.getElementById('pv_galaxy');
const LS_GREETING = 'greeting_text'; // NEW
const fIndex  = document.getElementById('f_index');
const fBirthTop  = document.getElementById('f_birthday_top');
const fBirthCard = document.getElementById('f_birthday_card');
const fGala   = document.getElementById('f_galaxy');

const pwEl    = document.getElementById('pw');
const msg     = document.getElementById('msg');

/* ====== Helpers ====== */
function showMsg(text, ok=true){
  msg.textContent = text;
  msg.className = ok ? 'ok' : 'warn';
  setTimeout(()=>{ msg.textContent=''; }, 2500);
}

function toDataURL(file){
  return new Promise((resolve,reject)=>{
    const reader = new FileReader();
    reader.onload = e => resolve(e.target.result);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

function setPreview(el, dataURL, fallbackLabel='Ch∆∞a c√≥ ·∫£nh'){
  el.innerHTML = dataURL ? `<img src="${dataURL}" alt="preview">` : `<small>${fallbackLabel}</small>`;
}

/* ====== Load existing ====== */
function load(){
  setPreview(pvIndex, localStorage.getItem(LS_IMG_INDEX) || '', 'Ch∆∞a c√≥ ·∫£nh');
  setPreview(pvBirthTop, localStorage.getItem(LS_IMG_BIRTH_TOP) || '', 'M·∫∑c ƒë·ªãnh: assets/cute-cake.png');
  setPreview(pvBirthCard, localStorage.getItem(LS_IMG_BIRTH_CARD) || '', 'M·∫∑c ƒë·ªãnh: assets/card-cute.jpg');
  setPreview(pvGala , localStorage.getItem(LS_IMG_GALAXY)|| '', 'Ch∆∞a c√≥ ·∫£nh');
  document.getElementById('greeting').value = localStorage.getItem(LS_GREETING) || '';
  pwEl.value = localStorage.getItem(LS_PW) || '';
}
load();

/* ====== Save ====== */
document.getElementById('btnSave').addEventListener('click', async ()=>{
  try{
    // password
    localStorage.setItem(LS_PW, (pwEl.value||'').trim());
localStorage.setItem(LS_GREETING, (document.getElementById('greeting').value || '').trim());

    // images (only when chosen)
    if (fIndex.files[0]) {
      const d = await toDataURL(fIndex.files[0]);
      localStorage.setItem(LS_IMG_INDEX, d);
      setPreview(pvIndex, d);
    }
    
    if (fBirthTop.files[0]) {
      const d = await toDataURL(fBirthTop.files[0]);
      localStorage.setItem(LS_IMG_BIRTH_TOP, d);
      setPreview(pvBirthTop, d);
    }
    if (fBirthCard.files[0]) {
      const d = await toDataURL(fBirthCard.files[0]);
      localStorage.setItem(LS_IMG_BIRTH_CARD, d);
      setPreview(pvBirthCard, d);
    }
    if (fGala.files[0]) {
      const d = await toDataURL(fGala.files[0]);
      localStorage.setItem(LS_IMG_GALAXY, d);
      setPreview(pvGala, d);
    }
    showMsg('ƒê√£ l∆∞u ‚úì', true);
  }catch(e){
    console.error(e);
    showMsg('L·ªói khi l∆∞u!', false);
  }
});

/* ====== Clear ====== */
document.getElementById('btnClear').addEventListener('click', ()=>{
  if(!confirm('X√≥a h·∫øt c√†i ƒë·∫∑t (·∫£nh + m·∫≠t kh·∫©u)?')) return;
  [LS_PW, LS_IMG_INDEX, LS_IMG_BIRTH_TOP, LS_IMG_BIRTH_CARD, LS_IMG_GALAXY].forEach(k=> localStorage.removeItem(k));
  load();
  showMsg('ƒê√£ x√≥a ‚úì', true);
});

/* ====== Export ====== */
document.getElementById('btnExport').addEventListener('click', ()=>{
  const data = {
    pw: localStorage.getItem(LS_PW) || '',
    img_index: localStorage.getItem(LS_IMG_INDEX) || '',
    img_birthday_top: localStorage.getItem(LS_IMG_BIRTH_TOP) || '',
    img_birthday_card: localStorage.getItem(LS_IMG_BIRTH_CARD) || '',
    greeting: localStorage.getItem(LS_GREETING) || '',
    img_galaxy: localStorage.getItem(LS_IMG_GALAXY) || ''
    
  };
  const blob = new Blob([JSON.stringify(data)], {type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'lovely-settings.json';
  a.click();
  URL.revokeObjectURL(a.href);
});

/* ====== Import ====== */
document.getElementById('btnImport').addEventListener('click', ()=>{
  document.getElementById('imp').click();
});
document.getElementById('imp').addEventListener('change', async (e)=>{
  const file = e.target.files[0];
  if(!file) return;
  try{
    const txt = await file.text();
    const data = JSON.parse(txt);
    if(typeof data !== 'object') throw new Error('Bad file');

    if('pw' in data) localStorage.setItem(LS_PW, data.pw||'');
    if('img_index' in data) localStorage.setItem(LS_IMG_INDEX, data.img_index||'');
    if('img_birthday_top' in data) localStorage.setItem(LS_IMG_BIRTH_TOP, data.img_birthday_top||'');
    if('img_birthday_card' in data) localStorage.setItem(LS_IMG_BIRTH_CARD, data.img_birthday_card||'');
    if('img_galaxy' in data) localStorage.setItem(LS_IMG_GALAXY, data.img_galaxy||'');
    if ('greeting' in data) localStorage.setItem(LS_GREETING, data.greeting || '');

    load();
    showMsg('ƒê√£ import ‚úì', true);
  }catch(err){
    console.error(err);
    showMsg('File kh√¥ng h·ª£p l·ªá!', false);
  }
});

</script>
</body>
</html>
