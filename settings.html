<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>C√†i ƒë·∫∑t ·∫£nh & m·∫≠t kh·∫©u</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0e14; --card:#121826; --muted:#8a93a6; --ink:#e6ebff; --accent:#6ee7ff;
      --box:#0f1422; --ok:#62f3a2; --warn:#ff7a7a; --border:#1e2637;
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0;
      background:radial-gradient(1200px 700px at 80% 10%, #141d2f, #0b0e14 60%);
      color:var(--ink);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }
    h1{
      text-align:center;
      font-size:clamp(22px,3vw,28px);
      margin:16px 0 6px
    }
    p.sub{
      text-align:center;
      color:var(--muted);
      margin:0 0 18px
    }
    .wrap{
      width:min(980px, 94vw);
      margin:0 auto 40px;
      display:grid;
      gap:18px
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap:16px;
    }
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .title{
      font-weight:700;
      margin:0 0 10px;
      letter-spacing:.2px
    }
    .preview{
      width:100%;
      aspect-ratio:1/1;
      background:var(--box);
      border:1px dashed #2b3550;
      border-radius:12px;
      display:grid;
      place-items:center;
      overflow:hidden;
      margin-bottom:10px;
      color:var(--muted);
      font-size:12px;
      text-align:center;
      padding:8px;
    }
    .preview img{
      width:100%;
      height:100%;
      object-fit:cover
    }
    .row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap
    }
    .row input[type="file"]{
      flex:1;
      color:var(--muted)
    }
    .pad{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px
    }
    label.sectionLabel{
      display:block;
      font-weight:700;
      color:var(--ink);
      margin:24px 0 12px;
      font-size:14px;
      letter-spacing:.2px;
      text-transform:uppercase;
    }
    label.fieldLabel{
      display:block;
      color:var(--muted);
      font-size:13px;
      margin:8px 0 6px
    }
    input[type="password"], input[type="text"]{
      width:100%;
      height:42px;
      background:var(--box);
      color:var(--ink);
      border:1px solid #2b3550;
      border-radius:10px;
      padding:0 12px;
      outline:none;
    }
    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px
    }
    button{
      height:40px;
      border-radius:10px;
      border:1px solid var(--border);
      background:#111829;
      color:#dfe6ff;
      padding:0 14px;
      cursor:pointer;
      font-family:inherit;
    }
    button.primary{
      background:linear-gradient(0deg,#0ea5e9,#38bdf8);
      border:0;
      color:#00121a;
      font-weight:700
    }
    button.green{
      background:linear-gradient(0deg,#34d399,#6ee7b7);
      border:0;
      color:#022b1e;
      font-weight:700
    }
    button.red{
      background:linear-gradient(0deg,#fb7185,#fda4af);
      border:0;
      color:#33050e;
      font-weight:700
    }
    .hint{
      color:var(--muted);
      font-size:12px;
      margin-top:6px
    }
    .footer{
      text-align:center;
      color:#8ea3c2;
      opacity:.85;
      margin-top:10px
    }
    .ok{ color:#62f3a2 }
    .warn{ color:#ff7a7a }
    @media (max-width:1100px){ .grid{ grid-template-columns:1fr 1fr } }
    @media (max-width:900px){ .grid{ grid-template-columns:1fr } }
    .galaxyGrid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(min(140px,45%),1fr));
      gap:16px;
    }
  </style>
</head>
<body>
  <h1>‚öôÔ∏è C√†i ƒë·∫∑t ·∫£nh & m·∫≠t kh·∫©u</h1>
  <p class="sub">
    Ch·ªçn ·∫£nh cho c√°c m√†n + ƒë·∫∑t m·∫≠t kh·∫©u üíù<br/>
    Galaxy gi·ªù cho t·ªëi ƒëa 5 ·∫£nh ƒë·ªÉ quay trong v≈© tr·ª• ‚ú®
  </p>

  <section class="wrap">

    <!-- NH√ìM ·∫¢NH CH√çNH -->
    <div class="grid">
      <!-- INDEX -->
      <div class="card">
        <div class="title">·∫¢nh cho <u>Index</u> (m√†n h√¨nh nh·∫≠p pass)</div>
        <div class="preview" id="pv_index"><small>Ch∆∞a c√≥ ·∫£nh</small></div>
        <div class="row">
          <input type="file" id="f_index" accept="image/*">
        </div>
        <small class="hint">Hi·ªÉn th·ªã ·ªü b√™n tr√°i m√†n h√¨nh nh·∫≠p pass.</small>
      </div>

      <!-- BIRTHDAY - TOP -->
      <div class="card">
        <div class="title">·∫¢nh cho <u>Birthday ‚Äî Top</u> (·∫£nh n·ªÅn trang sinh nh·∫≠t)</div>
        <div class="preview" id="pv_birthday_top"><small>M·∫∑c ƒë·ªãnh: assets/cute-cake.png</small></div>
        <div class="row">
          <input type="file" id="f_birthday_top" accept="image/*">
        </div>
        <small class="hint">N·∫øu kh√¥ng ch·ªçn, s·∫Ω d√πng assets/cute-cake.png.</small>
      </div>

      <!-- BIRTHDAY - CARD -->
      <div class="card">
        <div class="title">·∫¢nh cho <u>Birthday ‚Äî Card</u> (thi·ªáp b·∫•m ƒë·ªÉ m·ªü qu√†)</div>
        <div class="preview" id="pv_birthday_card"><small>M·∫∑c ƒë·ªãnh: assets/card-cute.jpg</small></div>
        <div class="row">
          <input type="file" id="f_birthday_card" accept="image/*">
        </div>
        <small class="hint">N·∫øu kh√¥ng ch·ªçn, s·∫Ω d√πng assets/card-cute.jpg.</small>
      </div>
    </div>

    <!-- NH√ìM GALAXY 5 ·∫¢NH -->
    <label class="sectionLabel">·∫¢NH GALAXY (t·ªëi ƒëa 5 t·∫•m quay xung quanh & spotlight)</label>
    <div class="galaxyGrid">
      <div class="card">
        <div class="title">Galaxy 1</div>
        <div class="preview" id="pv_galaxy1"><small>Ch∆∞a c√≥ ·∫£nh</small></div>
        <div class="row">
          <input type="file" id="f_galaxy1" accept="image/*">
        </div>
      </div>

      <div class="card">
        <div class="title">Galaxy 2</div>
        <div class="preview" id="pv_galaxy2"><small>Ch∆∞a c√≥ ·∫£nh</small></div>
        <div class="row">
          <input type="file" id="f_galaxy2" accept="image/*">
        </div>
      </div>

      <div class="card">
        <div class="title">Galaxy 3</div>
        <div class="preview" id="pv_galaxy3"><small>Ch∆∞a c√≥ ·∫£nh</small></div>
        <div class="row">
          <input type="file" id="f_galaxy3" accept="image/*">
        </div>
      </div>

      <div class="card">
        <div class="title">Galaxy 4</div>
        <div class="preview" id="pv_galaxy4"><small>Ch∆∞a c√≥ ·∫£nh</small></div>
        <div class="row">
          <input type="file" id="f_galaxy4" accept="image/*">
        </div>
      </div>

      <div class="card">
        <div class="title">Galaxy 5</div>
        <div class="preview" id="pv_galaxy5"><small>Ch∆∞a c√≥ ·∫£nh</small></div>
        <div class="row">
          <input type="file" id="f_galaxy5" accept="image/*">
        </div>
      </div>
    </div>

    <!-- PASSWORD + GREETING -->
    <div class="pad">
      <label class="fieldLabel" for="pw">M·∫≠t kh·∫©u m·ªü qu√†</label>
      <input type="password" id="pw" placeholder="Nh·∫≠p m·∫≠t kh·∫©u... (v√≠ d·ª•: 1234)">

      <label class="fieldLabel" for="greeting">L·ªùi ch√∫c khi m·ªü qu√†</label>
      <input type="text" id="greeting"
        placeholder="V√≠ d·ª•: Ch√∫c b·∫°n tu·ªïi m·ªõi r·ª±c r·ª° & h·∫°nh ph√∫c! üíñ">

      <div class="actions">
        <button class="primary" id="btnSave">üíæ L∆∞u</button>
        <button class="red" id="btnClear">üóë X√≥a h·∫øt</button>
        <button id="btnExport">‚¨áÔ∏è Export</button>
        <label for="imp" class="btnlike">
          <button id="btnImport">‚¨ÜÔ∏è Import</button>
        </label>
        <input id="imp" type="file" accept="application/json" style="display:none">
        <span id="msg" style="margin-left:auto;"></span>
      </div>

      <div class="footer">
        N·∫øu ·∫£nh qu√° n·∫∑ng, tr√¨nh duy·ªát c√≥ th·ªÉ gi·ªõi h·∫°n dung l∆∞·ª£ng l∆∞u.
        Khuy·∫øn ngh·ªã &lt; 2MB m·ªói ·∫£nh.
      </div>
    </div>

    <div style="text-align:center;margin-top:8px">
      <a href="index.html" style="color:#a7f3d0;text-decoration:none">‚Üê Quay l·∫°i Index</a>
    </div>
  </section>

<script>
/* ====== Keys trong localStorage ====== */
const LS_PW             = 'userPassword';
const LS_IMG_INDEX      = 'img_index_dataurl';
const LS_IMG_BIRTH_TOP  = 'img_birthday_top_dataurl';
const LS_IMG_BIRTH_CARD = 'img_birthday_card_dataurl';
const LS_GREETING       = 'greeting_text';

/* 5 ·∫£nh galaxy m·ªõi */
const LS_IMG_GALAXY_1   = 'img_galaxy_1';
const LS_IMG_GALAXY_2   = 'img_galaxy_2';
const LS_IMG_GALAXY_3   = 'img_galaxy_3';
const LS_IMG_GALAXY_4   = 'img_galaxy_4';
const LS_IMG_GALAXY_5   = 'img_galaxy_5';

/* ====== Elements ====== */
const pvIndex      = document.getElementById('pv_index');
const pvBirthTop   = document.getElementById('pv_birthday_top');
const pvBirthCard  = document.getElementById('pv_birthday_card');
const pvGalaxy1    = document.getElementById('pv_galaxy1');
const pvGalaxy2    = document.getElementById('pv_galaxy2');
const pvGalaxy3    = document.getElementById('pv_galaxy3');
const pvGalaxy4    = document.getElementById('pv_galaxy4');
const pvGalaxy5    = document.getElementById('pv_galaxy5');

const fIndex       = document.getElementById('f_index');
const fBirthTop    = document.getElementById('f_birthday_top');
const fBirthCard   = document.getElementById('f_birthday_card');
const fGalaxy1     = document.getElementById('f_galaxy1');
const fGalaxy2     = document.getElementById('f_galaxy2');
const fGalaxy3     = document.getElementById('f_galaxy3');
const fGalaxy4     = document.getElementById('f_galaxy4');
const fGalaxy5     = document.getElementById('f_galaxy5');

const pwEl         = document.getElementById('pw');
const greetEl      = document.getElementById('greeting');
const msg          = document.getElementById('msg');

/* ====== Helpers ====== */
function showMsg(text, ok=true){
  msg.textContent = text;
  msg.className = ok ? 'ok' : 'warn';
  setTimeout(()=>{ msg.textContent=''; }, 2500);
}

function toDataURL(file){
  return new Promise((resolve,reject)=>{
    const reader = new FileReader();
    reader.onload = e => resolve(e.target.result);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

function setPreview(el, dataURL, fallbackLabel='Ch∆∞a c√≥ ·∫£nh'){
  el.innerHTML = dataURL
    ? `<img src="${dataURL}" alt="preview">`
    : `<small>${fallbackLabel}</small>`;
}

/* ====== Load t·ªìn t·∫°i trong localStorage ƒë·ªÉ xem l·∫°i ====== */
function load(){
  setPreview(pvIndex,
    localStorage.getItem(LS_IMG_INDEX) || '',
    'Ch∆∞a c√≥ ·∫£nh'
  );
  setPreview(pvBirthTop,
    localStorage.getItem(LS_IMG_BIRTH_TOP) || '',
    'M·∫∑c ƒë·ªãnh: assets/cute-cake.png'
  );
  setPreview(pvBirthCard,
    localStorage.getItem(LS_IMG_BIRTH_CARD) || '',
    'M·∫∑c ƒë·ªãnh: assets/card-cute.jpg'
  );

  setPreview(pvGalaxy1,
    localStorage.getItem(LS_IMG_GALAXY_1) || '',
    'Ch∆∞a c√≥ ·∫£nh'
  );
  setPreview(pvGalaxy2,
    localStorage.getItem(LS_IMG_GALAXY_2) || '',
    'Ch∆∞a c√≥ ·∫£nh'
  );
  setPreview(pvGalaxy3,
    localStorage.getItem(LS_IMG_GALAXY_3) || '',
    'Ch∆∞a c√≥ ·∫£nh'
  );
  setPreview(pvGalaxy4,
    localStorage.getItem(LS_IMG_GALAXY_4) || '',
    'Ch∆∞a c√≥ ·∫£nh'
  );
  setPreview(pvGalaxy5,
    localStorage.getItem(LS_IMG_GALAXY_5) || '',
    'Ch∆∞a c√≥ ·∫£nh'
  );

  greetEl.value = localStorage.getItem(LS_GREETING) || '';
  pwEl.value    = localStorage.getItem(LS_PW) || '';
}
load();

/* ====== Save / L∆∞u ====== */
document.getElementById('btnSave').addEventListener('click', async ()=>{
  try{
    // password + greeting
    localStorage.setItem(LS_PW, (pwEl.value||'').trim());
    localStorage.setItem(LS_GREETING, (greetEl.value||'').trim());

    // t·ª´ng ·∫£nh n·∫øu user v·ª´a ch·ªçn
    if (fIndex.files[0]) {
      const d = await toDataURL(fIndex.files[0]);
      localStorage.setItem(LS_IMG_INDEX, d);
      setPreview(pvIndex, d);
    }
    if (fBirthTop.files[0]) {
      const d = await toDataURL(fBirthTop.files[0]);
      localStorage.setItem(LS_IMG_BIRTH_TOP, d);
      setPreview(pvBirthTop, d);
    }
    if (fBirthCard.files[0]) {
      const d = await toDataURL(fBirthCard.files[0]);
      localStorage.setItem(LS_IMG_BIRTH_CARD, d);
      setPreview(pvBirthCard, d);
    }

    // Galaxy 1..5
    if (fGalaxy1.files[0]) {
      const d = await toDataURL(fGalaxy1.files[0]);
      localStorage.setItem(LS_IMG_GALAXY_1, d);
      setPreview(pvGalaxy1, d);
    }
    if (fGalaxy2.files[0]) {
      const d = await toDataURL(fGalaxy2.files[0]);
      localStorage.setItem(LS_IMG_GALAXY_2, d);
      setPreview(pvGalaxy2, d);
    }
    if (fGalaxy3.files[0]) {
      const d = await toDataURL(fGalaxy3.files[0]);
      localStorage.setItem(LS_IMG_GALAXY_3, d);
      setPreview(pvGalaxy3, d);
    }
    if (fGalaxy4.files[0]) {
      const d = await toDataURL(fGalaxy4.files[0]);
      localStorage.setItem(LS_IMG_GALAXY_4, d);
      setPreview(pvGalaxy4, d);
    }
    if (fGalaxy5.files[0]) {
      const d = await toDataURL(fGalaxy5.files[0]);
      localStorage.setItem(LS_IMG_GALAXY_5, d);
      setPreview(pvGalaxy5, d);
    }

    showMsg('ƒê√£ l∆∞u ‚úì', true);
  }catch(e){
    console.error(e);
    showMsg('L·ªói khi l∆∞u!', false);
  }
});

/* ====== Clear / X√≥a ====== */
document.getElementById('btnClear').addEventListener('click', ()=>{
  if(!confirm('X√≥a h·∫øt c√†i ƒë·∫∑t (·∫£nh + m·∫≠t kh·∫©u)?')) return;
  [
    LS_PW,
    LS_IMG_INDEX,
    LS_IMG_BIRTH_TOP,
    LS_IMG_BIRTH_CARD,
    LS_GREETING,
    LS_IMG_GALAXY_1,
    LS_IMG_GALAXY_2,
    LS_IMG_GALAXY_3,
    LS_IMG_GALAXY_4,
    LS_IMG_GALAXY_5
  ].forEach(k=> localStorage.removeItem(k));
  load();
  showMsg('ƒê√£ x√≥a ‚úì', true);
});

/* ====== Export ====== */
document.getElementById('btnExport').addEventListener('click', ()=>{
  const data = {
    pw: localStorage.getItem(LS_PW) || '',
    greeting: localStorage.getItem(LS_GREETING) || '',
    img_index: localStorage.getItem(LS_IMG_INDEX) || '',
    img_birthday_top: localStorage.getItem(LS_IMG_BIRTH_TOP) || '',
    img_birthday_card: localStorage.getItem(LS_IMG_BIRTH_CARD) || '',
    galaxy_1: localStorage.getItem(LS_IMG_GALAXY_1) || '',
    galaxy_2: localStorage.getItem(LS_IMG_GALAXY_2) || '',
    galaxy_3: localStorage.getItem(LS_IMG_GALAXY_3) || '',
    galaxy_4: localStorage.getItem(LS_IMG_GALAXY_4) || '',
    galaxy_5: localStorage.getItem(LS_IMG_GALAXY_5) || ''
  };
  const blob = new Blob([JSON.stringify(data)], {type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'lovely-settings.json';
  a.click();
  URL.revokeObjectURL(a.href);
});

/* ====== Import ====== */
document.getElementById('btnImport').addEventListener('click', ()=>{
  document.getElementById('imp').click();
});
document.getElementById('imp').addEventListener('change', async (e)=>{
  const file = e.target.files[0];
  if(!file) return;
  try{
    const txt = await file.text();
    const data = JSON.parse(txt);
    if(typeof data !== 'object') throw new Error('Bad file');

    if('pw' in data) localStorage.setItem(LS_PW, data.pw||'');
    if('greeting' in data) localStorage.setItem(LS_GREETING, data.greeting||'');

    if('img_index' in data) localStorage.setItem(LS_IMG_INDEX, data.img_index||'');
    if('img_birthday_top' in data) localStorage.setItem(LS_IMG_BIRTH_TOP, data.img_birthday_top||'');
    if('img_birthday_card' in data) localStorage.setItem(LS_IMG_BIRTH_CARD, data.img_birthday_card||'');

    if('galaxy_1' in data) localStorage.setItem(LS_IMG_GALAXY_1, data.galaxy_1||'');
    if('galaxy_2' in data) localStorage.setItem(LS_IMG_GALAXY_2, data.galaxy_2||'');
    if('galaxy_3' in data) localStorage.setItem(LS_IMG_GALAXY_3, data.galaxy_3||'');
    if('galaxy_4' in data) localStorage.setItem(LS_IMG_GALAXY_4, data.galaxy_4||'');
    if('galaxy_5' in data) localStorage.setItem(LS_IMG_GALAXY_5, data.galaxy_5||'');

    load();
    showMsg('ƒê√£ import ‚úì', true);
  }catch(err){
    console.error(err);
    showMsg('File kh√¥ng h·ª£p l·ªá!', false);
  }
});
</script>
</body>
</html>
