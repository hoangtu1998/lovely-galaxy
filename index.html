<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíñ M·ªü Qu√† B√≠ M·∫≠t üíñ</title>
  <!-- Font h·ªón h·ª£p: ch·ªØ m·ªÅm + s·ªë tr√≤n -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@600&family=Bubblegum+Sans&display=swap" rel="stylesheet">
  <meta name="theme-color" content="#ffb6c1">
  <style>
    :root{
      --bg:#fff0f7;
      --card:#ffe6ef;
      --ink:#4c1f3d;
      --muted:#a86b88;
      --key:#fff;
      --shadow:0 4px 16px rgba(255,105,180,.35);
      --accent:#ff69b4;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; }
    body{
      background: radial-gradient(circle at 70% 20%, #ffeaf2 0%, #ffd9e8 50%, #fff0f7 100%);
      color:var(--ink);
      font-family:'Quicksand', sans-serif;
      display:flex; flex-direction:column; align-items:center;
    }
    h1{
      font-family:'Pacifico', cursive;
      font-size:clamp(30px,4vw,46px);
      color:#ff4081;
      margin:28px 0 14px;
      text-shadow:0 2px 4px rgba(255,105,180,.4);
      letter-spacing:1px;
    }
    .wrap{
      width:min(960px,94vw);
      display:grid;
      place-items:center;
    }
    .card{
      width:min(850px,100%);
      background:var(--card);
      border-radius:24px;
      border:3px solid #ffcde3;
      box-shadow:0 12px 40px rgba(255,182,193,.4);
      padding:28px;
      display:grid; grid-template-columns:1fr 1fr; gap:20px;
      transition:transform .15s ease;
    }
    .left{ display:grid; place-items:center; }
    .frame{
      width:min(360px,100%);
      border-radius:20px;
      border:4px solid #ffb6c1;
      box-shadow:0 8px 20px rgba(255,182,193,.55);
      overflow:hidden;
    }
    .frame img{ width:100%; height:100%; object-fit:cover; display:block; aspect-ratio:1/1; }
    .right{ display:grid; gap:16px; align-content:start; }
    .display{
      height:60px; background:#fff; border-radius:16px;
      border:2px solid #ffb6c1; box-shadow:inset 0 2px 6px rgba(255,182,193,.4);
      display:flex; align-items:center; justify-content:flex-end;
      padding:0 16px; font-size:28px;
      color:#ff4081; letter-spacing:5px;
      font-family:'Bubblegum Sans', cursive;
    }
    .pad{
      display:grid; grid-template-columns:repeat(3,1fr); gap:12px;
      user-select:none;
    }
    button.key{
      height:64px; border-radius:18px;
      border:none; background:#fff;
      box-shadow:var(--shadow);
      font-size:22px; font-family:'Bubblegum Sans', cursive;
      color:#ff69b4; cursor:pointer;
      transition:transform .1s, background .2s;
    }
    button.key:hover{ background:#ffe6f1; }
    button.key:active{ transform:scale(.96); }
    .key.ok{
      background:linear-gradient(0deg,#ff6fb0,#ffa3cc);
      color:#fff; border:0; font-size:24px;
      box-shadow:0 4px 12px rgba(255,105,180,.4);
    }
    .key.del{
      background:#fff4f7;
      color:#d16a8d;
      border:1px solid #ffd1df;
      font-family:'Quicksand';
    }
    .foot{
      text-align:center; color:var(--muted); font-size:14px;
      font-family:'Quicksand', sans-serif;
    }
    .links{ text-align:center; margin:10px 0 0 }
    .links a{ color:#ff4fa0; text-decoration:none; }
    .links a:hover{ text-decoration:underline; }
    @media(max-width:820px){ .card{ grid-template-columns:1fr; } }
  </style>
</head>
<body>
  <h1>üå∏ M·ªü kh√≥a qu√† t·∫∑ng b√≠ m·∫≠t üå∏</h1>
  <section class="wrap">
    <div class="card" id="card">
      <div class="left">
        <div class="frame">
          <img id="indexPic" src="assets/OIP.webp" alt="·∫¢nh index"/>
        </div>
      </div>
      <div class="right">
        <div class="display" id="disp"></div>
        <div class="pad">
          <button class="key" data-k="1">1</button>
          <button class="key" data-k="2">2</button>
          <button class="key" data-k="3">3</button>
          <button class="key" data-k="4">4</button>
          <button class="key" data-k="5">5</button>
          <button class="key" data-k="6">6</button>
          <button class="key" data-k="7">7</button>
          <button class="key" data-k="8">8</button>
          <button class="key" data-k="9">9</button>
          <button class="key del" data-k="del">‚å´</button>
          <button class="key" data-k="0">0</button>
          <button class="key ok" data-k="ok">üíñ</button>
        </div>
        <div class="foot">V√†o <a href="settings.html">C√†i ƒë·∫∑t</a> ƒë·ªÉ ch·ªçn ·∫£nh & m·∫≠t kh·∫©u d·ªÖ th∆∞∆°ng üíó</div>
      </div>
    </div>
    <div class="links"><a href="settings.html">‚öôÔ∏è C√†i ƒë·∫∑t</a></div>
  </section>

  <script>
  const LS_PW = 'userPassword';
  const LS_IMG_INDEX = 'img_index_dataurl';
  const pic = document.getElementById('indexPic');
  const saved = localStorage.getItem(LS_IMG_INDEX);
  if(saved) pic.src = saved;

  const disp = document.getElementById('disp');
  const card = document.getElementById('card');
  let buf = "";

  function getSecret(){ return (localStorage.getItem(LS_PW)||'').trim()||"1234"; }
  function updateDisp(){ disp.textContent = buf.replace(/./g,'‚Ä¢'); }
  function shake(){
    card.style.transition='transform .08s';
    card.style.transform='translateX(-5px)';
    setTimeout(()=> card.style.transform='translateX(5px)',70);
    setTimeout(()=> card.style.transform='translateX(0)',140);
  }
  function submit(){
    if(buf===getSecret()){ localStorage.setItem('gift_unlocked','1'); location.href='birthday.html'; }
    else{ buf=""; updateDisp(); shake(); }
  }
  function press(k){
    if(k==='ok')return submit();
    if(k==='del'){ buf=buf.slice(0,-1); return updateDisp();}
    if(/^[0-9]$/.test(k)&&buf.length<12){ buf+=k; updateDisp();}
  }
  document.querySelectorAll('.key').forEach(b=>b.addEventListener('click',()=>press(b.dataset.k)));
  addEventListener('keydown',e=>{
    if(e.key>='0'&&e.key<='9')press(e.key);
    if(e.key==='Backspace')press('del');
    if(e.key==='Enter')press('ok');
  });
  updateDisp();
  if('serviceWorker'in navigator)navigator.serviceWorker.register('./sw.js').catch(()=>{});
  </script>
</body>
</html>
