<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>💖 Mở Quà Bí Mật 💖</title>
  <!-- Font hỗn hợp: chữ mềm + số tròn -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@600&family=Bubblegum+Sans&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="theme-color" content="#ffb6c1">
  <style>
    :root{
      --bg:#fff0f7;
      --card:#ffe6ef;
      --ink:#4c1f3d;
      --muted:#a86b88;
      --key:#fff;
      --shadow:0 4px 16px rgba(255,105,180,.35);
      --accent:#ff69b4;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; }
    body{
  background: radial-gradient(circle at 70% 20%, #ffeaf2 0%, #ffd9e8 50%, #fff0f7 100%);
  color:var(--ink);
  font-family:'Quicksand', sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:16px 0;              /* thêm padding cho mobile không bị dính mép */
  min-height:100vh;
}

h1{
  font-family:'Pacifico', cursive;
  font-size:clamp(24px,4vw,32px);  /* nhỏ hơn để không chiếm quá nhiều chiều cao */
  color:#ff4081;
  margin:8px 0 16px;              /* giảm khoảng trắng trên/dưới */
  text-shadow:0 2px 4px rgba(255,105,180,.4);
  letter-spacing:1px;
  text-align:center;
  max-width:90vw;
  line-height:1.2;
}
     .wrap{
      width:100%;
      max-width:420px;            /* Giới hạn chiều ngang để vừa mọi điện thoại */
      display:grid;
      place-items:center;
      padding:0 16px;
    }

    .card{
      width:100%;
      background:var(--card);
      border-radius:20px;
      border:2px solid #ffcde3;
      box-shadow:0 12px 40px rgba(255,182,193,.4);
      padding:20px 16px;
      display:grid;
      grid-template-columns:1fr;
      gap:16px;
      transition:transform .15s ease;
    }
    .left{ display:flex; justify-content:center; }
.frame{
  width:200px;               /* thu gọn lại từ ~360px */
  max-width:70vw;
  border-radius:16px;
  border:3px solid #ffb6c1;
  box-shadow:0 8px 20px rgba(255,182,193,.55);
  overflow:hidden;
}
.frame img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  aspect-ratio:1/1;
}
  .right{
  display:grid;
  gap:12px;
  align-content:start;
}

.display{
  height:48px;                     /* thấp hơn */
  background:#fff;
  border-radius:14px;
  border:2px solid #ffb6c1;
  box-shadow:inset 0 2px 6px rgba(255,182,193,.4);
  display:flex;
  align-items:center;
  justify-content:flex-end;
  padding:0 12px;
  font-size:24px;                  /* nhỏ nhẹ hơn */
  color:#ff4081;
  letter-spacing:5px;
  font-family:'Bubblegum Sans', cursive;
}

.pad{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  user-select:none;
}

button.key{
  height:54px;                     /* từ 64px -> 54px để vừa ngón tay mà không quá chiếm chỗ */
  border-radius:14px;
  border:none;
  background:#fff;
  box-shadow:var(--shadow);
  font-size:20px;
  font-family:'Bubblegum Sans', cursive;
  color:#ff69b4;
  cursor:pointer;
  transition:transform .1s, background .2s;
}
button.key:hover{ background:#ffe6f1; }
button.key:active{ transform:scale(.96); }

.key.ok{
  background:linear-gradient(0deg,#ff6fb0,#ffa3cc);
  color:#fff;
  border:0;
  font-size:20px;
  box-shadow:0 4px 12px rgba(255,105,180,.4);
}
.key.del{
  background:#fff4f7;
  color:#d16a8d;
  border:1px solid #ffd1df;
  font-family:'Quicksand';
}

.foot{
  text-align:center;
  color:var(--muted);
  font-size:12px;         /* nhỏ hơn để bớt chiếm chỗ */
  line-height:1.4;
  font-family:'Quicksand', sans-serif;
}

.links{
  text-align:center;
  margin:12px 0 0;
  font-size:14px;
}
.links a{
  color:#ff4fa0;
  text-decoration:none;
}
.links a:hover{
  text-decoration:underline;
}

    @media(max-width:820px){ .card{ grid-template-columns:1fr; } }
  </style>
</head>
<body>
  <h1>🌸 Mở khóa quà tặng bí mật 🌸</h1>
  <section class="wrap">
    <div class="card" id="card">
      <div class="left">
        <div class="frame">
          <img id="indexPic" src="assets/OIP.webp" alt="Ảnh index"/>
        </div>
      </div>
      <div class="right">
        <div class="display" id="disp"></div>
        <div class="pad">
          <button class="key" data-k="1">1</button>
          <button class="key" data-k="2">2</button>
          <button class="key" data-k="3">3</button>
          <button class="key" data-k="4">4</button>
          <button class="key" data-k="5">5</button>
          <button class="key" data-k="6">6</button>
          <button class="key" data-k="7">7</button>
          <button class="key" data-k="8">8</button>
          <button class="key" data-k="9">9</button>
          <button class="key del" data-k="del">⌫</button>
          <button class="key" data-k="0">0</button>
          <button class="key ok" data-k="ok">💖</button>
        </div>
        <div class="foot">Vào <a href="settings.html">Cài đặt</a> để chọn ảnh & mật khẩu dễ thương 💗</div>
      </div>
    </div>
    <div class="links"><a href="settings.html">⚙️ Cài đặt</a></div>
  </section>

  <script>
  const LS_PW = 'userPassword';
  const LS_IMG_INDEX = 'img_index_dataurl';
  const pic = document.getElementById('indexPic');
  const saved = localStorage.getItem(LS_IMG_INDEX);
  if(saved) pic.src = saved;

  const disp = document.getElementById('disp');
  const card = document.getElementById('card');
  let buf = "";

  function getSecret(){ return (localStorage.getItem(LS_PW)||'').trim()||"1234"; }
  function updateDisp(){ disp.textContent = buf.replace(/./g,'•'); }
  function shake(){
    card.style.transition='transform .08s';
    card.style.transform='translateX(-5px)';
    setTimeout(()=> card.style.transform='translateX(5px)',70);
    setTimeout(()=> card.style.transform='translateX(0)',140);
  }
  function submit(){
    if(buf===getSecret()){ localStorage.setItem('gift_unlocked','1'); location.href='birthday.html'; }
    else{ buf=""; updateDisp(); shake(); }
  }
  function press(k){
    if(k==='ok')return submit();
    if(k==='del'){ buf=buf.slice(0,-1); return updateDisp();}
    if(/^[0-9]$/.test(k)&&buf.length<12){ buf+=k; updateDisp();}
  }
  document.querySelectorAll('.key').forEach(b=>b.addEventListener('click',()=>press(b.dataset.k)));
  addEventListener('keydown',e=>{
    if(e.key>='0'&&e.key<='9')press(e.key);
    if(e.key==='Backspace')press('del');
    if(e.key==='Enter')press('ok');
  });
  updateDisp();
  if('serviceWorker'in navigator)navigator.serviceWorker.register('./sw.js').catch(()=>{});
  </script>
</body>
</html>


