<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Birthday ‚ú®</title>

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Playpen+Sans:wght@400;700&display=swap" rel="stylesheet">

  <meta name="theme-color" content="#ffd9e8">

  <style>
    *{box-sizing:border-box;margin:0;padding:0;}
    html,body{height:100%;}
    body{
      overflow:hidden;
      color:#fff;
      font-family:"Playpen Sans",sans-serif;
      /* fallback n·ªÅn h·ªìng t√≠m, ƒë·ªÉ d√π ·∫£nh ch∆∞a load c≈©ng kh√¥ng bao gi·ªù ƒëen */
      background:
        radial-gradient(circle at 50% 30%,
          rgba(255,170,200,1) 0%,
          rgba(255,120,180,1) 40%,
          rgba(90,0,60,1) 100%);
      background-color:#ff7ab4;
    }

    /* l·ªõp n·ªÅn h·ªìng c·ªë ƒë·ªãnh ·ªü d∆∞·ªõi h·∫øt */
    #pinkBg{
      position:fixed;
      inset:0;
      background:linear-gradient(
        180deg,
        #ffc0cb 0%,
        #ff99cc 50%,
        #ff66b2 100%
      );
      z-index:-1;
      pointer-events:none;
      user-select:none;
    }

    /* l·ªõp n·ªÅn ·∫£nh ph·ªß t√¥ng h·ªìng */
    .bgLayerImg{
      position:fixed;
      inset:0;
      z-index:0;
      pointer-events:none;
      user-select:none;

      background:
        /* l·ªõp ph·ªß h·ªìng ƒë·ªÉ b·∫£o ƒë·∫£m t√¥ng m√†u */
        linear-gradient(
          rgba(255,170,200,0.4),
          rgba(255,120,180,0.5)
        ),
        /* ·∫¢nh n·ªÅn sinh nh·∫≠t (ƒë·ªïi ƒë∆∞·ªùng d·∫´n cho ƒë√∫ng file th·∫≠t c·ªßa b·∫°n) */
        url("../assets/cake-cute_2.jpg");
      background-position:center;
      background-size:cover;
      background-repeat:no-repeat;
      background-attachment:fixed;

      filter:saturate(1.2) brightness(1.05);
    }

    /* m∆∞a ch·ªØ */
    #matrix{
      position:fixed;
      inset:0;
      z-index:1;
      pointer-events:none;
    }

    /* ph√°o hoa */
    #fireworks{
      position:fixed;
      inset:0;
      z-index:2;
      pointer-events:none;
    }

    /* tuy·∫øt + m√®o tim */
    #cuteLayer{
      position:fixed;
      inset:0;
      z-index:3;
      pointer-events:none;
    }

    /* text tr√™n c√πng */
   .topTextWrap{
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  text-align:center;
  z-index:5;

  /* m√†u ch·ªØ h·ªìng t∆∞∆°i h·ª£p n·ªÅn */
   color:#ff2b2b; /* ƒë·ªè t∆∞∆°i s√°ng */
  text-shadow:
    0 0 12px rgba(255,50,80,1),
    0 0 30px rgba(255,0,70,0.8),
    0 4px 10px rgba(0,0,0,0.6);

  font-family:"Dancing Script",cursive;
  line-height:1.15;
  pointer-events:none;
}
.line{
  white-space:nowrap;
  font-weight:700;
  font-size:clamp(32px,5vw,56px);
  letter-spacing:1px;
}
    .line{
      white-space:nowrap;
      font-weight:700;
      font-size:clamp(28px,4vw,48px);
      letter-spacing:.3px;
    }

    /* c·ª•m h·ªôp qu√† */
    .giftWrap{
      position:fixed;
      left:0;
      right:0;
      top:50%;
      transform:translateY(-50%);
      display:grid;
      place-items:center;
      z-index:6;
      text-align:center;
    }

    .giftEmoji{
      position:relative;
      font-size:clamp(80px,12vw,130px);
      line-height:1;
      cursor:pointer;
      display:inline-block;
      animation:shake 1s infinite;
      transform-origin:center bottom;
      filter:drop-shadow(0 4px 8px rgba(0,0,0,.8));
    }

    .giftText{
      position:absolute;
      top:60%;
      left:50%;
      transform:translate(-50%,-50%);
      color:#fff;
      font-size:clamp(20px,3vw,28px);
      font-weight:700;
      text-shadow:0 2px 6px rgba(0,0,0,.7);
      pointer-events:none;
      line-height:1.2;
      text-align:center;
    }

    .hintTap{
      margin-top:10px;
      color:#ffe4f1;
      text-shadow:0 2px 6px rgba(0,0,0,.8);
      font-size:15px;
      font-weight:400;
    }

    /* tr·∫°ng th√°i m·ªü */
    .giftEmoji.open{
      animation:none;
    }
    .giftEmoji::before{
      content:"üéÅ";
      position:absolute;
      left:0;
      right:0;
      top:0;
      text-align:center;
      font-size:inherit;
      line-height:1;
      transform-origin:center bottom;
      pointer-events:none;
      opacity:0;
    }
    .giftEmoji.open::before{
      opacity:1;
      animation:lidFlip .6s ease-out forwards;
      filter:drop-shadow(0 8px 12px rgba(255,105,180,.7));
    }

    @keyframes lidFlip{
      0%{
        transform:translateY(0) rotateX(0deg) scale(1);
      }
      60%{
        transform:translateY(-40px) rotateX(70deg) scale(1.05);
      }
      100%{
        transform:translateY(-60px) rotateX(110deg) scale(1.05);
      }
    }

    /* l·∫Øc h·ªôp qu√† m·∫°nh */
    @keyframes shake{
      0%,100% { transform: translateY(0) rotate(0deg) scale(1); }
      10%     { transform: translateY(-4px) rotate(-4deg) scale(1.03); }
      20%     { transform: translateY(2px) rotate(3deg) scale(1.04); }
      30%     { transform: translateY(-6px) rotate(-6deg) scale(1.05); }
      40%     { transform: translateY(3px) rotate(4deg) scale(1.03); }
      50%     { transform: translateY(-8px) rotate(-4deg) scale(1.06); }
      60%     { transform: translateY(4px) rotate(4deg) scale(1.03); }
      70%     { transform: translateY(-5px) rotate(-3deg) scale(1.05); }
      80%     { transform: translateY(2px) rotate(2deg) scale(1.02); }
      90%     { transform: translateY(-3px) rotate(-2deg) scale(1.03); }
    }

    /* v·∫Ω ch·ªØ m∆∞a s·∫Øc n√©t */
    canvas{image-rendering:pixelated;}
  </style>
</head>
<body>

  <!-- n·ªÅn h·ªìng c·ªë ƒë·ªãnh -->
  <div id="pinkBg"></div>

  <!-- n·ªÅn ·∫£nh ph·ªß t√¥ng h·ªìng -->
  <div class="bgLayerImg"></div>

  <!-- m∆∞a ch·ªØ -->
  <canvas id="matrix"></canvas>

  <!-- ph√°o hoa -->
  <canvas id="fireworks"></canvas>

  <!-- tuy·∫øt + m√®o + tim -->
  <canvas id="cuteLayer"></canvas>

  <!-- text ch√∫c m·ª´ng -->
  <div class="topTextWrap">
    <div class="line">Ch√∫c m·ª´ng sinh nh·∫≠t</div>
    <div class="line">B·∫°n iu</div>
    <div class="line">29+</div>
  </div>

  <!-- h·ªôp qu√† -->
  <div class="giftWrap">
    <div class="giftEmoji" id="giftEmoji">
      üéÅ
      <div class="giftText">M·ªü qu√†</div>
    </div>
    <div class="hintTap">(ch·∫°m ƒë·ªÉ m·ªü)</div>
  </div>

<script>
/* ================= MATRIX RAIN ================= */
const cvs = document.getElementById('matrix');
const ctx = cvs.getContext('2d');
const glyphs = 'HappyBirthdayüéÇ‚ú®';
let W,H,cols,drops,DPR;

function resizeMatrix(){
  DPR = Math.max(1, window.devicePixelRatio || 1);
  W = cvs.width = Math.floor(innerWidth * DPR);
  H = cvs.height = Math.floor(innerHeight * DPR);
  cvs.style.width = innerWidth + 'px';
  cvs.style.height = innerHeight + 'px';
  ctx.setTransform(DPR,0,0,DPR,0,0);

  const step = 22;
  cols = Math.floor(innerWidth / step);
  drops = Array(cols).fill(0);
}
addEventListener('resize', resizeMatrix);
resizeMatrix();

(function drawMatrix(){
  requestAnimationFrame(drawMatrix);

  // n·ªÅn trong su·ªët ƒë·ªÉ th·∫•y n·ªÅn h·ªìng ph√≠a sau
  ctx.clearRect(0,0,innerWidth,innerHeight);

  const step = 22;
  ctx.font = 'bold 18px monospace';
  ctx.globalCompositeOperation = 'source-over';

  for(let i=0;i<drops.length;i++){
    const ch = glyphs[Math.floor(Math.random()*glyphs.length)];
    const x = i*step;
    const y = drops[i]*step;

    // vi·ªÅn tr·∫Øng
    ctx.lineWidth = 3;
    ctx.strokeStyle = 'rgba(255,255,255,0.8)';
    ctx.strokeText(ch, x, y);

    // ch·ªØ s√°ng h·ªìng
    ctx.shadowColor = 'rgba(255,105,180,.8)';
    ctx.shadowBlur = 12;
    ctx.fillStyle = '#fff';
    ctx.fillText(ch, x, y);

    ctx.shadowBlur = 0;

    // r∆°i ch·∫≠m
    if (y > H && Math.random() > 0.97) {
      drops[i] = 0;
    } else {
      drops[i] += 0.5;
    }
  }
})();

/* ================= PH√ÅO HOA ================= */
const fwCanvas = document.getElementById('fireworks');
const fwCtx = fwCanvas.getContext('2d');
let fwW, fwH, fireworks=[], particles=[];
function resizeFW(){
  fwW = fwCanvas.width = innerWidth;
  fwH = fwCanvas.height = innerHeight;
}
addEventListener('resize', resizeFW);
resizeFW();

class Firework {
  constructor(){
    this.x = Math.random()*fwW;
    this.y = fwH;
    this.tx = Math.random()*fwW;
    this.ty = Math.random()*fwH*0.4 + fwH*0.1;
    this.vx = (this.tx - this.x)/30;
    this.vy = (this.ty - this.y)/30;
    this.life = 30;
    // m·ªói ph√°o ch·ªçn m√†u c·∫ßu v·ªìng ri√™ng
    const rainbow = ['#ff3366','#ff9933','#ffff33','#33ff66','#33ccff','#9966ff','#ff33cc'];
    this.color = rainbow[Math.floor(Math.random()*rainbow.length)];
  }
  update(){
    this.x += this.vx;
    this.y += this.vy;
    this.life--;
    if(this.life<=0){
      explode(this.x,this.y);
      return false;
    }
    return true;
  }
  draw(){
    fwCtx.beginPath();
    fwCtx.fillStyle = this.color;
    fwCtx.arc(this.x,this.y,2,0,Math.PI*2);
    fwCtx.fill();
  }
}

class Particle {
  constructor(x,y){
    const angle = Math.random()*Math.PI*2;
    const speed = Math.random()*3+1;
    this.x=x;this.y=y;
    this.vx = Math.cos(angle)*speed;
    this.vy = Math.sin(angle)*speed;
    this.alpha=1;
    this.decay = Math.random()*0.02+0.015;
    const rainbow = ['#ff3366','#ff9933','#ffff33','#33ff66','#33ccff','#9966ff','#ff33cc'];
    this.color = rainbow[Math.floor(Math.random()*rainbow.length)];
  }
  update(){
    this.x+=this.vx;
    this.y+=this.vy;
    this.vy+=0.03;
    this.alpha-=this.decay;
    return this.alpha>0;
  }
  draw(){
    fwCtx.globalAlpha=this.alpha;
    fwCtx.beginPath();
    fwCtx.fillStyle=this.color;
    fwCtx.arc(this.x,this.y,2,0,Math.PI*2);
    fwCtx.fill();
    fwCtx.globalAlpha=1;
  }
}


function explode(x,y){
  for(let i=0;i<40;i++){
    particles.push(new Particle(x,y));
  }
}

function loopFW(){
  requestAnimationFrame(loopFW);
  // thay fill m·ªù ƒëen b·∫±ng clear trong su·ªët ƒë·ªÉ KH√îNG ph·ªß ƒëen n·ªÅn h·ªìng
  fwCtx.clearRect(0,0,fwW,fwH);

  // spawn ph√°o m·ªõi ng·∫´u nhi√™n
  if(Math.random()<0.08){
    fireworks.push(new Firework());
  }

  fireworks = fireworks.filter(fw=>{
    const alive = fw.update();
    fw.draw();
    return alive;
  });

  particles = particles.filter(p=>{
    const alive = p.update();
    p.draw();
    return alive;
  });
}
loopFW();

/* ================= TUY·∫æT R∆†I + M√àO + TIM =================
   B·∫£n t·ªëi ∆∞u m∆∞·ª£t:
   - Tuy·∫øt to h∆°n, r∆°i nhanh h∆°n ch√∫t
   - M√®o + tim bay t·ª± do, n·∫£y khi ch·∫°m vi·ªÅn
*/
const cuteCanvas = document.getElementById('cuteLayer');
const cuteCtx = cuteCanvas.getContext('2d');
let cW, cH;

let snowflakes=[];
let critters=[];

const ENABLE_SNOW = true;
const ENABLE_CRITTERS = true;

function resizeCute(){
  cW = cuteCanvas.width = innerWidth;
  cH = cuteCanvas.height = innerHeight;
}
addEventListener('resize', resizeCute);
resizeCute();

/* t·∫°o tuy·∫øt */
function initSnow(){
  snowflakes = [];
  for(let i=0;i<50;i++){
    snowflakes.push({
      x:Math.random()*cW,
      y:Math.random()*cH,
      r:Math.random()*3+3,        // to r√µ
      spdY:Math.random()*1+0.8,   // t·ªëc ƒë·ªô r∆°i
      drift:(Math.random()*1-0.5) // l·ªách ngang
    });
  }
}

/* t·∫°o m√®o + tim bay */
function initCritters(){
  critters = [];
  const EMOJIS = ['üê±','üê±','üíñ','üíñ','üê±','üíñ'];
  for(let i=0;i<6;i++){
    const emoji = EMOJIS[i % EMOJIS.length];
    critters.push({
      emoji,
      x:Math.random()*cW,
      y:Math.random()*cH,
      vx:(Math.random()<0.5?-1:1)*(1.5+Math.random()*1.5),
      vy:(Math.random()<0.5?-1:1)*(1.5+Math.random()*1.5),
      size:28+Math.random()*8,
    });
  }
}

if(ENABLE_SNOW) initSnow();
if(ENABLE_CRITTERS) initCritters();

function loopCute(){
  requestAnimationFrame(loopCute);
  cuteCtx.clearRect(0,0,cW,cH);

  // v·∫Ω tuy·∫øt
  if(ENABLE_SNOW){
    cuteCtx.fillStyle = "#fff";
    for(const f of snowflakes){
      f.y += f.spdY;
      f.x += f.drift;

      if(f.y > cH){
        f.y = -10;
        f.x = Math.random()*cW;
      }

      cuteCtx.beginPath();
      cuteCtx.globalAlpha = 0.9;
      cuteCtx.arc(f.x,f.y,f.r,0,Math.PI*2);
      cuteCtx.fill();
    }
    cuteCtx.globalAlpha = 1;
  }

  // v·∫Ω m√®o v√† tim
  if(ENABLE_CRITTERS){
    for(const c of critters){
      c.x += c.vx;
      c.y += c.vy;

      // ƒë·∫≠p t∆∞·ªùng th√¨ b·∫≠t l·∫°i
      if(c.x < 20){ c.x = 20; c.vx *= -1; }
      if(c.x > cW-20){ c.x = cW-20; c.vx *= -1; }
      if(c.y < 20){ c.y = 20; c.vy *= -1; }
      if(c.y > cH-20){ c.y = cH-20; c.vy *= -1; }

      cuteCtx.save();
      cuteCtx.translate(c.x, c.y);

      // l·∫≠t ngang n·∫øu ch·∫°y sang tr√°i (ƒë·ªÉ m√®o quay ƒë·∫ßu)
      if(c.vx < 0){
        cuteCtx.scale(-1,1);
      }

      cuteCtx.font = `${c.size}px "Segoe UI Emoji","Apple Color Emoji","Noto Color Emoji",sans-serif`;
      cuteCtx.textAlign = "center";
      cuteCtx.textBaseline = "middle";
      cuteCtx.fillText(c.emoji,0,0);

      cuteCtx.restore();
    }
  }

  cuteCtx.globalAlpha = 1;
}
loopCute();

/* ================= CLICK M·ªû QU√Ä ================= */
const gift = document.getElementById('giftEmoji');
gift.addEventListener('click', () => {
  gift.classList.add('open');
  setTimeout(() => {
    location.href = 'galaxy_2.html';
  }, 600);
});
</script>
</body>
</html>
